(window.webpackJsonp=window.webpackJsonp||[]).push([[5,3],{297:function(e,t,o){var content=o(300);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(77).default)("099b6a19",content,!0,{sourceMap:!1})},298:function(e,t,o){"use strict";o.r(t);o(1);var n={name:"SessionItem",props:{data:{type:Array,required:!0},movieId:{type:String,required:!0},single:{type:Boolean,default:!1},title:{type:String,default:null}},data:function(){return{selectedDate:null,selectedTime:null,placesData:null,selectedRow:null,selectedSeat:null,bookedTicket:null,bookedTicketModal:!1}},methods:{selectDateTime:function(e,time){this.selectedRow=null,this.selectedSeat=null,this.selectedDate=e,this.selectedTime=time,this.showPlaces()},bookTicket:function(){var e=this;this.$axios.$post("/bookPlace",{movie_id:this.movieId,daytime:this.selectedTime,showdate:this.selectedDate,row:this.selectedRow,seat:this.selectedSeat}).then((function(t){var data=t.data;e.bookedTicket=data,e.bookedTicketModal=!0})).finally((function(){e.showPlaces(),e.selectedRow=null,e.selectedSeat=null}))},showPlaces:function(){var e=this;this.$axios.$get("/showPlaces",{params:{movie_id:this.movieId,daytime:this.selectedTime,showdate:this.selectedDate}}).then((function(t){var data=t.data;e.placesData=data}))},selectSeat:function(e,t){if(this.selectedSeat===t&&this.selectedRow===e)return this.selectedRow=null,void(this.selectedSeat=null);this.selectedRow=e,this.selectedSeat=t}}},r=(o(299),o(54)),component=Object(r.a)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("b-card",{staticClass:"movie-card"},[o("b-card-title",[e.movieId&&!e.single?o("nuxt-link",{attrs:{to:"movies/"+e.movieId}},[e._v("\n      "+e._s(e.title)+"\n    ")]):e._e(),e._v(" "),e.single&&e.title?o("h4",[e._v("\n      "+e._s(e.title)+"\n    ")]):e._e()],1),e._v(" "),e._l(e.data,(function(t,n){return o("div",{key:n,staticClass:"mt-3"},[o("h5",[e._v(e._s(t.showdate))]),e._v(" "),e._l(t.daytime.split(";"),(function(n){return o("b-button",{key:n.id,staticClass:"date-tag",class:{active:n===e.selectedTime&&t.showdate===e.selectedDate},attrs:{variant:"light"},on:{click:function(o){return e.selectDateTime(t.showdate,n)}}},[e._v("\n      "+e._s(n)+"\n    ")])})),e._v(" "),t.showdate===e.selectedDate&&e.placesData?o("div",{staticClass:"py-3 d-flex flex-column align-items-center"},[e._l(e.placesData,(function(t,n){return o("div",{key:n,staticClass:"seat-rows-wrapper"},[o("div",{staticClass:"row-title",attrs:{title:"Row: "+t[0].row}},[e._v("\n          "+e._s(t[0].row)+"\n        ")]),e._v(" "),o("div",{staticClass:"seat-rows"},e._l(t[1],(function(n){return o("b-button",{key:n.seat,staticClass:"seat-item",class:{active:t[0].row===e.selectedRow&&n.seat===e.selectedSeat},attrs:{variant:"light",disabled:!n.is_free},on:{click:function(o){return e.selectSeat(t[0].row,n.seat)}}},[e._v("\n            "+e._s(n.seat)+"\n          ")])})),1)])})),e._v(" "),e.selectedRow&&e.selectedSeat?o("div",{staticClass:"book-wrapper"},[o("ul",{staticClass:"book-info"},[o("li",[o("span",{staticClass:"key"},[e._v("Date:")]),e._v("\n            "+e._s(e.selectedDate)+", "+e._s(e.selectedTime)+"\n          ")]),e._v(" "),o("li",[o("span",{staticClass:"key"},[e._v("Row:")]),e._v("\n            "+e._s(e.selectedRow)+"\n          ")]),e._v(" "),o("li",[o("span",{staticClass:"key"},[e._v("Seat:")]),e._v("\n            "+e._s(e.selectedSeat)+"\n          ")])]),e._v(" "),o("b-button",{attrs:{variant:"primary"},on:{click:function(t){return e.bookTicket()}}},[e._v("\n          Book ticket\n        ")])],1):e._e()],2):e._e()],2)})),e._v(" "),e.bookedTicket?o("b-modal",{attrs:{title:"Ticket booked!","hide-footer":"",centered:""},model:{value:e.bookedTicketModal,callback:function(t){e.bookedTicketModal=t},expression:"bookedTicketModal"}},[o("div",[o("b",[e._v("Ticket key")]),e._v(" "+e._s(e.bookedTicket.ticketkey)+"\n    ")]),e._v(" "),o("div",[o("b",[e._v("Movie id")]),e._v(" "+e._s(e.bookedTicket.movie_id)+"\n    ")]),e._v(" "),o("div",[o("b",[e._v("Row")]),e._v(" "+e._s(e.bookedTicket.row)+"\n    ")]),e._v(" "),o("div",[o("b",[e._v("Seat")]),e._v(" "+e._s(e.bookedTicket.seat)+"\n    ")]),e._v(" "),o("div",[o("b",[e._v("Date")]),e._v(" "+e._s(e.bookedTicket.showdate)+", "+e._s(e.bookedTicket.daytime)+"\n    ")])]):e._e()],2)}),[],!1,null,"d624a54c",null);t.default=component.exports},299:function(e,t,o){"use strict";o(297)},300:function(e,t,o){var n=o(76)(!1);n.push([e.i,".date-tag[data-v-d624a54c]{display:inline-block;font-weight:500;padding:8px 16px;margin-right:8px;margin-bottom:8px;border-radius:16px;background-color:#eee;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.date-tag.active[data-v-d624a54c]{background-color:#007bff!important;color:#fff!important}.seat-rows-wrapper[data-v-d624a54c]{display:flex;align-items:center}.seat-rows-wrapper[data-v-d624a54c]:not(:first-child){margin-top:12px}.seat-rows-wrapper .seat-rows[data-v-d624a54c]{display:flex;flex-wrap:wrap}.book-wrapper[data-v-d624a54c]{display:flex;align-items:center;justify-content:space-between;width:100%;margin-top:12px;padding:8px 16px;background-color:rgba(0,123,255,.12549);border-radius:8px}.book-wrapper ul[data-v-d624a54c]{list-style:none;padding-left:0;margin-bottom:0}.book-wrapper li .key[data-v-d624a54c],.seat-item[data-v-d624a54c]{font-weight:500}.seat-item[data-v-d624a54c]{height:27px;width:27px;margin:4px 2px;display:flex;align-items:center;justify-content:center;line-height:1;border-radius:50%;background-color:#eee;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.seat-item.active[data-v-d624a54c]{background-color:#007bff!important;color:#fff!important}.row-title[data-v-d624a54c]{min-width:20px}",""]),e.exports=n},323:function(e,t,o){"use strict";o.r(t);o(5),o(4),o(6),o(3),o(7);var n=o(0),r=(o(2),o(1),o(78));function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}var l={name:"MovieIndex",components:{SessionItem:o(298).default},data:function(){return{movieData:null,movieSessions:null}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(r.b)({genres:"config/genres"})),created:function(){this.getMovieData(),this.getMovieSessions()},methods:{getGenreLabel:function(e){return this.genres.filter((function(t){return t.value===e}))[0].label},getMovieSessions:function(){var e=this;this.$axios.$get("/movieShows?movie_id=".concat(this.$route.params.id)).then((function(t){var data=t.data;e.movieSessions=data[e.$route.params.id]}))},getMovieData:function(){var e=this;this.$axios.$get("/movies",{params:{movie_id:this.$route.params.id}}).then((function(t){var data=t.data;e.movieData=data[0]}))}}},d=l,v=o(54),component=Object(v.a)(d,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.movieData?o("b-container",{staticClass:"movie-page"},[o("div",{staticClass:"movie-info"},[o("b-img",{staticClass:"movie-poster",attrs:{src:e.movieData.image}}),e._v(" "),o("div",{staticClass:"movie-info-content"},[o("h1",[e._v(e._s(e.movieData.name))]),e._v(" "),o("h5",{staticClass:"movie-genre"},[e._v("\n        "+e._s(e.getGenreLabel(e.movieData.genre))+"\n      ")]),e._v(" "),o("p",[o("span",{domProps:{innerHTML:e._s(e.movieData.description)}})]),e._v(" "),o("span",{staticClass:"additional-info",domProps:{innerHTML:e._s(e.movieData.additional)}})])],1),e._v(" "),e.movieSessions?o("session-item",{staticClass:"mt-4",attrs:{data:e.movieSessions,"movie-id":e.$route.params.id,title:"Sessions (select date to book)",single:""}}):e._e()],1):e._e()}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{SessionItem:o(298).default})}}]);